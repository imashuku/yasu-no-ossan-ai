<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡æ´²ã®ãŠã£ã•ã‚“AI ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ‡ãƒ¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .ossan-icon {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        .speaking-indicator {
            animation: pulse-ring 1s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <!-- APIã‚­ãƒ¼è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="api-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-xl font-bold mb-4">ğŸ”‘ ElevenLabs APIè¨­å®š</h2>
            <p class="text-sm text-gray-600 mb-4">éŸ³å£°ç”Ÿæˆæ©Ÿèƒ½ã‚’ä½¿ã†ã«ã¯ã€ElevenLabsã®APIã‚­ãƒ¼ã¨ãƒœã‚¤ã‚¹IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">APIã‚­ãƒ¼</label>
                    <input type="password" id="api-key-input" class="w-full border rounded p-2" placeholder="sk_...">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ãƒœã‚¤ã‚¹IDï¼ˆä½œæˆã—ãŸãƒœã‚¤ã‚¹ã®IDï¼‰</label>
                    <input type="text" id="voice-id-input" class="w-full border rounded p-2" placeholder="ä¾‹: JBFqnCBsd6RMkjVDRqzb">
                    <p class="text-xs text-gray-500 mt-1">ElevenLabsã®ã€ŒVoicesã€ã‹ã‚‰ç¢ºèªã§ãã¾ã™</p>
                </div>
                <button onclick="saveApiSettings()" class="w-full bg-orange-500 text-white font-bold py-2 rounded hover:bg-orange-600">
                    è¨­å®šã‚’ä¿å­˜ã—ã¦é–‹å§‹
                </button>
                <button onclick="skipApiSettings()" class="w-full text-gray-500 text-sm hover:underline">
                    ã‚¹ã‚­ãƒƒãƒ—ï¼ˆéŸ³å£°ãªã—ã§ãƒ‡ãƒ¢ï¼‰
                </button>
            </div>
        </div>
    </div>

    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="bg-orange-500 p-4 shadow-lg text-white">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center">
                <img src="ossan_character.png" alt="é‡æ´²ã®ãŠã£ã•ã‚“" class="w-10 h-10 rounded-full mr-2 border-2 border-white"> é‡æ´²ã®ãŠã£ã•ã‚“AI ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
            </h1>
            <div class="space-x-4">
                <button onclick="showTab('chat')" id="btn-chat" class="hover:bg-orange-600 px-3 py-2 rounded font-bold bg-white text-orange-500">ãŠæ‚©ã¿ç›¸è«‡å®¤AI</button>
                <button onclick="showTab('video')" id="btn-video" class="hover:bg-orange-600 px-3 py-2 rounded font-bold text-white border border-white">å‹•ç”»è‡ªå‹•ç”ŸæˆAI</button>
                <button onclick="document.getElementById('api-modal').classList.remove('hidden')" class="text-xs opacity-70 hover:opacity-100">âš™ï¸è¨­å®š</button>
            </div>
        </div>
    </nav>

    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
    <div class="container mx-auto p-6">

        <!-- TAB 1: ãŠæ‚©ã¿ç›¸è«‡å®¤AI -->
        <div id="tab-chat" class="block">
            <div class="bg-white rounded-xl shadow-2xl overflow-hidden max-w-2xl mx-auto border-4 border-orange-400">
                <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="bg-yellow-300 p-4 flex items-center border-b border-yellow-400">
                    <div class="w-16 h-16 rounded-full bg-white border-2 border-orange-500 flex items-center justify-center ossan-icon mr-4 shadow-md relative overflow-hidden">
                        <img src="ossan_character.png" alt="é‡æ´²ã®ãŠã£ã•ã‚“" class="w-full h-full object-cover">
                        <div id="speaking-ring" class="hidden absolute inset-0 border-4 border-orange-500 rounded-full speaking-indicator"></div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">AIé‡æ´²ã®ãŠã£ã•ã‚“</h2>
                        <p class="text-sm text-gray-600" id="status-text">24æ™‚é–“365æ—¥ã€ã„ã¤ã§ã‚‚è©±èãã§ã€œ</p>
                    </div>
                </div>

                <!-- ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ -->
                <div class="h-96 p-4 overflow-y-auto bg-yellow-50" id="chat-box">
                    <!-- AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                    <div class="flex items-start mb-4">
                        <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center mr-2 border border-orange-300 overflow-hidden">
                            <img src="ossan_character.png" alt="é‡æ´²ã®ãŠã£ã•ã‚“" class="w-full h-full object-cover">
                        </div>
                        <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow text-gray-800 max-w-xs border border-gray-200">
                            ã¾ã„ã©ï¼é‡æ´²ã®ãŠã£ã•ã‚“ã‚«ã‚¤ãƒ„ãƒ–ãƒªã§ã™ï¼<br>
                            ä»Šæ—¥ã¯ã©ãªã„ã—ãŸã‚“ï¼Ÿãªã‚“ã‹æ‚©ã¿äº‹ã‹ï¼Ÿ
                        </div>
                    </div>
                </div>

                <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
                <div class="p-4 bg-gray-50 border-t border-gray-200 flex">
                    <input type="text" id="user-input" class="flex-1 border rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400" placeholder="ã“ã“ã«å…¥åŠ›ã—ã¦ãª..." onkeypress="if(event.key==='Enter')sendMessage()">
                    <button onclick="sendMessage()" id="send-btn" class="bg-orange-500 text-white px-6 py-2 rounded-r-lg hover:bg-orange-600 font-bold">é€ä¿¡</button>
                </div>
                
                <!-- éŸ³å£°ãƒ¢ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆã‚¯ãƒªãƒƒã‚¯å¯èƒ½ï¼‰ -->
                <div class="p-2 bg-gray-100 text-center border-t border-gray-200">
                    <button onclick="document.getElementById('api-modal').classList.remove('hidden')" id="voice-status" class="text-sm text-gray-500 hover:text-orange-500 hover:underline cursor-pointer transition">ğŸ”‡ éŸ³å£°ãƒ¢ãƒ¼ãƒ‰: OFFï¼ˆã‚¿ãƒƒãƒ—ã—ã¦è¨­å®šï¼‰</button>
                </div>
            </div>
        </div>

        <!-- TAB 2: å‹•ç”»è‡ªå‹•ç”ŸæˆAI -->
        <div id="tab-video" class="hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 border-b pb-2">ğŸ¬ å”è³›ä¼æ¥­å‘ã‘ CMè‡ªå‹•ç”Ÿæˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">ä¼æ¥­å</label>
                            <input type="text" id="company-name" class="w-full border rounded p-2" value="æ ªå¼ä¼šç¤¾ã€‡ã€‡å»ºè¨­">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">ç¤¾é•·ã®å†™çœŸï¼ˆã‚¢ãƒã‚¿ãƒ¼ç”¨ï¼‰</label>
                            <div class="border-2 border-dashed border-gray-300 rounded p-4 text-center hover:bg-gray-50 cursor-pointer">
                                <p class="text-gray-500 text-sm">ã“ã“ã«å†™çœŸã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—</p>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">PRã—ãŸã„å†…å®¹</label>
                            <textarea id="pr-content" class="w-full border rounded p-2 h-24">æ»‹è³€ã®æœ¨æã‚’ä½¿ã£ãŸã€åœ°éœ‡ã«å¼·ã„å®¶ã¥ãã‚Šã€‚
ä»Šãªã‚‰ãƒ¢ãƒ‡ãƒ«ãƒã‚¦ã‚¹è¦‹å­¦ã§ã€Œè¿‘æ±Ÿç‰›ã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ä¸­ï¼</textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">å‹•ç”»ã‚¿ã‚¤ãƒ—</label>
                            <select class="w-full border rounded p-2">
                                <option>ãŠã£ã•ã‚“ã¨ç¤¾é•·ã®æ¼«æ‰é¢¨ï¼ˆæ¨å¥¨ï¼‰</option>
                                <option>ãƒ‹ãƒ¥ãƒ¼ã‚¹ç•ªçµ„é¢¨</option>
                                <option>æ„Ÿå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ã‚¿ãƒªãƒ¼é¢¨</option>
                            </select>
                        </div>
                        <button onclick="generateVideo()" class="w-full bg-blue-600 text-white font-bold py-3 rounded hover:bg-blue-700 shadow-lg transform transition hover:scale-105">
                            ğŸ¥ AIå‹•ç”»ã‚’ç”Ÿæˆã™ã‚‹ï¼ˆç´„30ç§’ï¼‰
                        </button>
                    </div>

                    <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ -->
                    <div class="bg-black rounded-lg flex items-center justify-center h-80 relative overflow-hidden group">
                        <div id="video-placeholder" class="text-center">
                            <div class="text-6xl mb-2">ğŸ¬</div>
                            <p class="text-gray-400">ã“ã“ã«ç”Ÿæˆã•ã‚ŒãŸå‹•ç”»ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        </div>
                        
                        <!-- ç”Ÿæˆä¸­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ -->
                        <div id="loading-overlay" class="hidden absolute inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center text-white">
                            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-4"></div>
                            <p id="loading-text">ã‚·ãƒŠãƒªã‚ªç”Ÿæˆä¸­...</p>
                            <p class="text-xs text-gray-400 mt-2">Voice converting...</p>
                        </div>
                        
                        <!-- ç”Ÿæˆå®Œäº†ç”»é¢ -->
                        <div id="video-result" class="hidden absolute inset-0 bg-gray-900 flex flex-col items-center justify-center text-white w-full h-full">
                            <div class="w-full h-full relative">
                                <div class="absolute top-4 left-4 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold">LIVE</div>
                                <div class="absolute bottom-10 left-4 text-left w-full pr-8">
                                    <p class="text-yellow-400 font-bold text-lg shadow-black drop-shadow-md" id="video-title">ã€Œæ ªå¼ä¼šç¤¾ã€‡ã€‡å»ºè¨­ã¯æ»‹è³€ã®æœ¨ã§å®¶ã¥ãã‚Šï¼ã€</p>
                                    <p class="text-white text-sm shadow-black drop-shadow-md">é‡æ´²ã®ãŠã£ã•ã‚“ Ã— ç¤¾é•·AI</p>
                                </div>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <button onclick="playGeneratedAudio()" class="bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full p-4 backdrop-blur-sm border border-white">
                                        <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- éš ã—éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
    <audio id="audio-player"></audio>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let API_KEY = localStorage.getItem('elevenlabs_api_key') || '';
        let VOICE_ID = localStorage.getItem('elevenlabs_voice_id') || '';
        let isVoiceEnabled = false;
        let generatedAudioBlob = null;

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            if (API_KEY && VOICE_ID) {
                document.getElementById('api-modal').classList.add('hidden');
                enableVoiceMode();
            }
        });

        // APIè¨­å®šã‚’ä¿å­˜
        function saveApiSettings() {
            API_KEY = document.getElementById('api-key-input').value;
            VOICE_ID = document.getElementById('voice-id-input').value;
            
            if (API_KEY && VOICE_ID) {
                localStorage.setItem('elevenlabs_api_key', API_KEY);
                localStorage.setItem('elevenlabs_voice_id', VOICE_ID);
                document.getElementById('api-modal').classList.add('hidden');
                enableVoiceMode();
            } else {
                alert('APIã‚­ãƒ¼ã¨ãƒœã‚¤ã‚¹IDã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            }
        }

        // ã‚¹ã‚­ãƒƒãƒ—
        function skipApiSettings() {
            document.getElementById('api-modal').classList.add('hidden');
        }

        // éŸ³å£°ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
        function enableVoiceMode() {
            isVoiceEnabled = true;
            const voiceStatus = document.getElementById('voice-status');
            voiceStatus.innerHTML = 'ğŸ”Š éŸ³å£°ãƒ¢ãƒ¼ãƒ‰: ONï¼ˆAIãŒå–‹ã‚Šã¾ã™ï¼ï¼‰';
            voiceStatus.classList.remove('text-gray-500');
            voiceStatus.classList.add('text-green-600', 'font-bold');
            // ONã®æ™‚ã‚‚ã‚¿ãƒƒãƒ—ã§è¨­å®šç”»é¢ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
            voiceStatus.onclick = function() {
                document.getElementById('api-modal').classList.remove('hidden');
            };
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function showTab(tabId) {
            document.getElementById('tab-chat').classList.add('hidden');
            document.getElementById('tab-video').classList.add('hidden');
            document.getElementById('tab-' + tabId).classList.remove('hidden');
            
            document.getElementById('btn-chat').classList.remove('bg-white', 'text-orange-500');
            document.getElementById('btn-chat').classList.add('text-white', 'border', 'border-white');
            document.getElementById('btn-video').classList.remove('bg-white', 'text-orange-500');
            document.getElementById('btn-video').classList.add('text-white', 'border', 'border-white');
            
            document.getElementById('btn-' + tabId).classList.add('bg-white', 'text-orange-500');
            document.getElementById('btn-' + tabId).classList.remove('text-white', 'border', 'border-white');
        }

        // AIå¿œç­”ã‚’ç”Ÿæˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
        function generateAIResponse(userMessage) {
            const responses = [
                "ãªã‚‹ã»ã©ãªãã€‚ãã‚Œã¯å¤§å¤‰ã‚„ã£ãŸãªãã€‚ã§ã‚‚å¤§ä¸ˆå¤«ã‚„ã€ãƒ¯ã‚·ãŒã¤ã„ã¨ã‚‹ã§ï¼",
                "ã›ã‚„ãªãã€ã‚ã‹ã‚‹ã‚ã‹ã‚‹ã€‚ãã†ã„ã†æ™‚ã¯ãªã€çµç¶æ¹–ã§ã‚‚çœºã‚ã¦æ·±å‘¼å¸ã™ã‚‹ã¨ãˆãˆã§ï¼",
                "ã»ã‚“ã¾ã‹ï¼ãã‚Œã¯ã™ã”ã„ã‚„ã‚“ï¼å¿œæ´ã—ã¨ã‚‹ã§ï¼",
                "ã†ã‚“ã†ã‚“ã€è©±ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ãªã€‚æ»‹è³€çœŒæ°‘ã¯ç²˜ã‚Šå¼·ã„ã‚“ã‚„ï¼",
                "ãƒ¯ã‚·ã‚‚ãªã€æ˜”ã¯æ‚©ã‚“ã ã“ã¨ã‚‚ã‚ã£ãŸã‚“ã‚„ã€‚ã§ã‚‚ä¸€æ­©ãšã¤é€²ã‚ã°å¤§ä¸ˆå¤«ã‚„ã§ï¼"
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // ElevenLabsã§éŸ³å£°ç”Ÿæˆ
        async function generateSpeech(text) {
            if (!isVoiceEnabled) return null;
            
            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'audio/mpeg',
                        'Content-Type': 'application/json',
                        'xi-api-key': API_KEY
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: 'eleven_multilingual_v2',
                        voice_settings: {
                            stability: 0.5,
                            similarity_boost: 0.75
                        }
                    })
                });
                
                if (response.ok) {
                    return await response.blob();
                } else {
                    console.error('éŸ³å£°ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', await response.text());
                    return null;
                }
            } catch (error) {
                console.error('éŸ³å£°ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                return null;
            }
        }

        // éŸ³å£°ã‚’å†ç”Ÿ
        function playAudio(blob) {
            const audio = document.getElementById('audio-player');
            audio.src = URL.createObjectURL(blob);
            audio.play();
            
            // è©±ã—ã¦ã„ã‚‹é–“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            document.getElementById('speaking-ring').classList.remove('hidden');
            document.getElementById('status-text').textContent = 'ğŸ—£ï¸ è©±ã—ä¸­...';
            
            audio.onended = () => {
                document.getElementById('speaking-ring').classList.add('hidden');
                document.getElementById('status-text').textContent = '24æ™‚é–“365æ—¥ã€ã„ã¤ã§ã‚‚è©±èãã§ã€œ';
            };
        }

        // ãƒãƒ£ãƒƒãƒˆé€ä¿¡
        async function sendMessage() {
            const input = document.getElementById('user-input');
            const text = input.value.trim();
            if (!text) return;

            const chatBox = document.getElementById('chat-box');
            const sendBtn = document.getElementById('send-btn');
            
            // ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
            sendBtn.disabled = true;
            sendBtn.textContent = '...';
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
            chatBox.innerHTML += `
                <div class="flex items-start mb-4 justify-end">
                    <div class="bg-blue-500 text-white p-3 rounded-2xl rounded-tr-none shadow max-w-xs">
                        ${text}
                    </div>
                    <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-sm ml-2">ç§</div>
                </div>
            `;
            
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            // AIå¿œç­”ç”Ÿæˆ
            const aiResponse = generateAIResponse(text);
            
            // éŸ³å£°ç”Ÿæˆï¼ˆä¸¦è¡Œå‡¦ç†ï¼‰
            let audioBlob = null;
            if (isVoiceEnabled) {
                document.getElementById('status-text').textContent = 'ğŸ™ï¸ éŸ³å£°ç”Ÿæˆä¸­...';
                audioBlob = await generateSpeech(aiResponse);
            }
            
            // AIå¿œç­”è¡¨ç¤º
            chatBox.innerHTML += `
                <div class="flex items-start mb-4">
                    <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center mr-2 border border-orange-300 overflow-hidden">
                        <img src="ossan_character.png" alt="é‡æ´²ã®ãŠã£ã•ã‚“" class="w-full h-full object-cover">
                    </div>
                    <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow text-gray-800 max-w-xs border border-gray-200">
                        ${aiResponse}
                    </div>
                </div>
            `;
            chatBox.scrollTop = chatBox.scrollHeight;
            
            // éŸ³å£°å†ç”Ÿ
            if (audioBlob) {
                playAudio(audioBlob);
            }
            
            // ãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–
            sendBtn.disabled = false;
            sendBtn.textContent = 'é€ä¿¡';
        }

        // å‹•ç”»ç”Ÿæˆï¼ˆãƒ‡ãƒ¢ï¼‰
        async function generateVideo() {
            const overlay = document.getElementById('loading-overlay');
            const result = document.getElementById('video-result');
            const loadingText = document.getElementById('loading-text');
            const companyName = document.getElementById('company-name').value;
            const prContent = document.getElementById('pr-content').value;
            
            overlay.classList.remove('hidden');
            
            // ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º
            loadingText.textContent = 'ã‚·ãƒŠãƒªã‚ªç”Ÿæˆä¸­...';
            await new Promise(r => setTimeout(r, 1000));
            
            loadingText.textContent = 'éŸ³å£°åˆæˆä¸­...';
            
            // å®Ÿéš›ã«éŸ³å£°ã‚’ç”Ÿæˆï¼ˆè¨­å®šãŒã‚ã‚‹å ´åˆï¼‰
            if (isVoiceEnabled) {
                const script = `ã¾ã„ã©ï¼${companyName}ã•ã‚“ã®ç´¹ä»‹ã‚„ã§ï¼${prContent.split('\n')[0]}`;
                generatedAudioBlob = await generateSpeech(script);
            }
            
            await new Promise(r => setTimeout(r, 1000));
            loadingText.textContent = 'å‹•ç”»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­...';
            await new Promise(r => setTimeout(r, 500));
            
            document.getElementById('video-title').textContent = `ã€Œ${companyName}ã‚’ã”ç´¹ä»‹ï¼ã€`;
            
            overlay.classList.add('hidden');
            result.classList.remove('hidden');
        }

        // ç”Ÿæˆã•ã‚ŒãŸå‹•ç”»ã®éŸ³å£°ã‚’å†ç”Ÿ
        function playGeneratedAudio() {
            if (generatedAudioBlob) {
                const audio = document.getElementById('audio-player');
                audio.src = URL.createObjectURL(generatedAudioBlob);
                audio.play();
            } else {
                alert('éŸ³å£°ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚');
            }
        }
    </script>
</body>
</html>
